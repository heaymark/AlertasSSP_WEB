<!DOCTYPE html>
<html lang="en">
<head>
	<title>Demo Visor Alertas</title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> <!-- movil -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>  <!-- caracteres -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- compativilidad -->
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- dispositivos -->
	<link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" /> <!-- icono de carto -->
	
	<!-- Carto-->
	<!-- <link type="text/css" rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />  -->
	<link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
	<!-- <script type="text/javascript" src='http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js'></script> --><!-- libreria de carto -->
	<script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>


	
	<!-- Bootstrap -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> <!-- Jquery -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"><!-- Optional theme -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Latest compiled and minified JavaScript -->


	<!-- Highcharts -->
	<script type="text/javascript" src="js/highcharts/highcharts_org.js"></script>
	<script type="text/javascript" src="js/highcharts/exporting.js"></script>
	<script type="text/javascript" src="js/highcharts/themes/sand-signika.js"></script>
	<!-- <script type="text/javascript" src="js/highcharts/graphics3.js"></script> -->

	<!-- Leaflet -->
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/leaflet.draw.css" />
	<script type="text/javascript" src="js/leaflet/leaflet.draw-src.js"></script>

	<!-- Propias -->
    <link type="text/css" rel="stylesheet" href="css/style.css">
	<link type="text/css" rel="stylesheet" href="css/main.css">

	<style type="text/css">
		.layer_selector {
			background: #fff;
			border-radius: 4px;
			padding: 0;
			border: 1px solid #999999;
			width: 150px;
			height: auto;
			box-shadow: rgba(0, 0, 0, 0.2) 0 0 4px 2px;
			font: 11px 'Helvetica';
			position: absolute;
			right: 20px;
			top: 8px;
			list-style-type: none;
		}

		.layer_selector > p {
			font-weight: bold;
			color: #666666;
			padding: 14px 14px 12px 14px;
			cursor: pointer;
			border-bottom: 1px solid #999;
		}

		.layer_selector li .item{
			padding: 8px;
			font-size: 11px;
			color: #222;
			cursor: pointer;
		}

		.layer_selector li:not(:last-child) {
			border-bottom: 1px solid #999;
		}

		.layer_selector li:hover {
			background-color: #e5e5e5;
			cursor: pointer;
		}

		.item {
			margin-left: 8px;
			font-size: 12pt;

			color: #222;
			cursor: pointer;
		}

		.subitem {
			margin-left: 20px;
			font-size: 10pt;

			color: #222;
			cursor: pointer;
		}

		#cartodb-logo a{
			pointer-events : none;
		}
	</style>
	<!-- Capa Sectores agregada por codigo -->
 	<!-- <script type="css/cartodb" id="markerPoint">
    	#sector_policia [zoom >= 13]{
               marker-fill-opacity: 1;
               // opacity: 0.1;
               marker-fill: #fff;
               marker-fill: #333333;
               marker-line-color: #229A00;
               marker-line-width: 1;
               marker-line-opacity: 1;
               marker-placement: point;
               marker-type: ellipse;
               marker-width: 10;
               marker-allow-overlap: true;
		}

		#sector_policia[delegacion= "AZCAPOTZALCO"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		    marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion= "XOCHIMILCO"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		    marker-fill: #E31A1C;
		  	marker-width: 25;
		}   
		#sector_policia[delegacion="GUSTAVO A. MADERO"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		    marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="MAGDALENA CONTRERAS"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		    marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="IZTACALCO"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		    marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="IZTAPALAPA"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		  	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="MILPA ALTA"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		    marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="ALVARO OBREGON"] {
		    marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		  	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="TLALPAN"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		  	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="BENITO JUAREZ"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		  	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="CUAUHTEMOC"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		  	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="VENUSTIANO CARRANZA"] {
		   	marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		 	marker-fill: #E31A1C;
		 	marker-width: 25;
		}
		#sector_policia[delegacion="TLALPAN"] {
			marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		 	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="COYOACAN"] {
			marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		 	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="CUAJIMALPA"] {
			marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		 	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="TLAHUAC"] {
			marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		 	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
		#sector_policia[delegacion="MIGUEL HIDALGO"] {
			marker-file: url("https://s3.amazonaws.com/com.cartodb.users-assets.production/maki-icons/police-18.svg");
		 	marker-fill: #E31A1C;
		  	marker-width: 25;
		}
	</script> -->
	<!-- Capa Colonias Coment en codigo -->
	<!-- <script type="css/cartodb" id="markerManzana">
		#colonias_ok {
		   polygon-opacity: 0.5;
		   line-color: #FFF;
		   line-width: 1;
		   line-opacity: 0.5;
		}

		#colonias_ok[nombre_id=10] {
		   polygon-fill: #A6CEE3;
		}
		#colonias_ok[nombre_id>=20] {
		   polygon-fill: #1F78B4;
		}
		#colonias_ok[nombre_id>=30] {
		   polygon-fill: #B2DF8A;
		}
		#colonias_ok[nombre_id>=80] {
		   polygon-fill: #33A02C;
		}
		#colonias_ok[nombre_id>=40] {
		   polygon-fill: #FB9A99;
		}
		#colonias_ok[nombre_id>=70] {
			polygon-fill: #E31A1C;
		}
		#colonias_ok[nombre_id>=60] {
		   polygon-fill: #6F7CFD;
		}
		#colonias_ok[nombre_id>=50] {
		   polygon-fill: #0CB127;
		}
	</script> -->
	<!-- Infowindows Alertas No Efectiva-->
	<script type="infowindow/html" id="infowindow_template_no_efectiva">
		<div class="cartodb-popup v2">
			<a href="#close" class="cartodb-popup-close-button close">x</a>
				<div class="cartodb-popup-content-wrapper">
					<div class="cartodb-popup-content">
		      			<h4>ID</h4>
		      			<p>{{cartodb_id}}</p>
		      			<h4>Asociación</h4>
		      			<p>{{asociacion}}</p>
		      			<h4>Cadena</h4>
		      			<p>{{cadena}}</p>
		    		</div>
		  		</div>
		  	<div class="cartodb-popup-tip-container"></div>
		</div>
	</script>
	<!-- Infowindows Alertas Efectivas -->
	<script type="infowindow/html" id="infowindow_template_efectiva">
		<div class="cartodb-popup v2">
			<a href="#close" class="cartodb-popup-close-button close">x</a>
				<div class="cartodb-popup-content-wrapper">
					<div class="cartodb-popup-content">
		      			<h4>ID</h4>
		      			<p>{{cartodb_id}}</p>
		      			<h4>Detalles</h4>
		      			<p>{{detalleopc}}</p>
		      			<h4>Detenidos</h4>
		      			<p>{{detenidos}}</p>
		    		</div>
		  		</div>
		  	<div class="cartodb-popup-tip-container"></div>
		</div>
	</script>
	<!-- Template Modal del Buffer -->
	<script  type="text/template" id="infoData">
	    <% _.each(item, function(row,idx) { %>
	    <tr>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.alerta_alto_bajo_i  %>
	        </td>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.asociacion %>
	        </td>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.cadena %>
	        </td>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.detalleefe %>
	        </td>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.detalleopc %>
	        </td>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.detenidos %>
	        </td>
	        <td style="color: rgb(0,0,0); font-weight: bold;">
	            <%= row.fecha_even %>
	        </td>
	    </tr>
	    <%  }); %>
	</script>
</head>
<body>
	<!-- Cabezera -->
	<!-- <div class="page-header"> -->
	<!-- <div class="container"> -->
    <div class="full-width full-width-extra">
			<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 columna">
				<span class="cabezera_">
					<a href="https://sig.cdmx.gob.mx">
						<!-- <img id="logo" src="css/images/MX_logo_GISCDMX_Smon-cab.svg" alt="Tu CDMX"> -->
					</a>
				</span>
				<a href="#" id="ctrl_layerpanel" class="on" title="<lang>Panel de capas</lang>"></a>
			</div>
			<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 columna">
					<span class="cabezera_">
						<a href="https://sig.cdmx.gob.mx">
							<img id="logo" src="css/images/MX_logo_GISCDMX_Smon-cab.svg" alt="Tu CDMX">
						</a>
					</span>
			</div>
			<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 columna">
		      		<p class="tipovisor">VISOR</p>
		      		<p class="titulovisor">
		      		Alerta de Establecimientos SSP
		      			<a class="visorToggler" href="#">
		      				<img id="desplegue" src="css/images/MX_ico_desplevi_blanco.svg">
		      			</a>
		      		</p>
			</div>
			<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 columna">
				<a href="#" class="ctrl_user on">
		          <img id="logouser" src="css/images/MX_ico_cab_user.svg">
		          <strong id="logouser">Maro </strong>
		        </a>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 columna">
		      	<span class="cabezera3">
			      	<a href="#">
			      		<img src="css/images/MX_logo_CDMX_blanco2.svg" id="cdmx">
			    	</a>
		    	</span>
			</div>
    </div>
    <!-- </div> -->
    <!-- </div> -->
	</div>
    <br>
    <!-- Contenido -->
	<div class="container-fluid">
	        <div class="row">
				<div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 columna">
	          		<form role="form" action="">
	              		<div class="form-group">
	                		<p class="form-control-static">Sector a elegir:</p>
	              		</div>
						<div class="form-group">
							<select id="sectores" class="form-control">
							</select>
						</div>
						<div class="form-group">
							<p class="form-control-static">Cuadrante a elegir:</p>
						</div>
			            <div class="form-group">
	                		<select id="cuadrante" class="form-control">
	                		</select>
						</div>
						<div class="form-group">
							<p class="form-control-static">Tipos de alertas:</p><br>
							<label class="radio-inline">
							  <input type="radio" name="alerta" id="aai" value="alertaaltoimpacto"> Alertas Efectivas
							</label>
							<label class="radio-inline">
							  <input type="radio" name="alerta" id="abi" value="alertabajoimpacto"> Alertas No Efectivas
							</label>
						</div>
	          		</form>
	          		<br>
	          		<P>Grafica de Alertas</P>
					<div id="graficaCircular" style="width: 100%; height: 100%; margin: 0 auto"></div>
	        	</div>
	          	<div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 columna">
	          		<div id="maps" style="height: 750px;"></div>
				</div>
	        </div>
	</div>	

	<!-- <footer> -->
		<div id="footer">
			<div class="container">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<div class="copyright">
							SIG-CDMX @ 2017 Gobierno de CDMX
						</div>
					</div>
				</div>
			</div>
		</div>
	<!-- </footer> -->

	<!-- Modals -->
	<!-- <button class="btn btn-default" data-toggle="modal" data-target="#miModal">Crear nueva</button> <a data-toggle="modal" href="#miModal" class="btn btn-primary btn-large">Abrir ventana modal</a>-->
	<div class="modal fade bs-example-modal-lg" id="miModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Detalle de alertas</h4>
				</div>
				<div class="modal-body">
	            		<table class="table table-hover">
							<thead>
								<tr>
									<td>Asociacion</td>
									<td>Cadena</td>
									<td>Detalle de la Alarma</td>
									<td>Nombre del establecimiento</td>
									<td>Segundos de duracion</td>
								</tr>
							</thead>
							<tbody id="tbldetalle"></tbody>
						</table>
				</div>
				<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<!-- <button type="button" class="btn btn-primary">Save changes</button> -->
				</div>
			</div>
		</div>
	</div>
	<!-- Modal Generado del Burffer -->
    <div id="info" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" >
        <div class="modal-dialog modal-lg" role="document" >
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        &times;
                    </button>
                    <h4 class="modal-title">Alertas Efectivas y No Efectivas</h4>
                </div>
                <div class="modal-body table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead >
                            <tr>
                                <td>Tipo alerta</td>
								<td>Asociación</td>
								<td>Cadena</td>
								<td>Detalle Alerta</td>
								<td>Tipo de Alerta</td>
								<td>Detenidos</td>
								<td>Fecha del Evento</td>
                            </tr>
                        </thead>
                        <tbody id="tblSucursal"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


	<script type="text/javascript" src="js/functions.js"></script>
	<script type="text/javascript" src="js/events.js"></script>
	<script type="text/javascript" src="js/maps.js"></script>
	<!-- <script type="text/javascript" src="js/cdmxCarto.js"></script> -->
	<!-- <script type="text/javascript" src="js/controls.js"></script> -->

</body>
</html>